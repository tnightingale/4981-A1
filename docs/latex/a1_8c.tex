\hypertarget{a1_8c}{
\section{a1.c File Reference}
\label{a1_8c}\index{a1.c@{a1.c}}
}


This program demonstrates simple Linux IPC using pipes and signals.  


{\ttfamily \#include \char`\"{}a1.h\char`\"{}}\par
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{a1_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}{main} ()
\begin{DoxyCompactList}\small\item\em The program's entry point. \item\end{DoxyCompactList}\item 
void \hyperlink{a1_8c_a2fb49de02216f1bca9a118ed5ddcf1a4}{input\_\-proc} (int pid\mbox{[}2\mbox{]}, int txpipe\_\-output, int txpipe\_\-translate)
\begin{DoxyCompactList}\small\item\em The input process. \item\end{DoxyCompactList}\item 
void \hyperlink{a1_8c_ac8d1bf8f5c60787353c9ea88595b9011}{output\_\-proc} (int rxpipe\_\-input, int rxpipe\_\-translate)
\begin{DoxyCompactList}\small\item\em The output process. \item\end{DoxyCompactList}\item 
void \hyperlink{a1_8c_a2f39a13b806940232930f1dfbc8d631a}{translate\_\-proc} (int rxpipe\_\-input, int txpipe\_\-output)
\begin{DoxyCompactList}\small\item\em The translate process. \item\end{DoxyCompactList}\item 
int \hyperlink{a1_8c_ab71fb9a570e0649866fb0a8524567a86}{read\_\-pipe} (int pipe\_\-rd, char $\ast$buffer, size\_\-t size)
\begin{DoxyCompactList}\small\item\em A read() wrapper function. \item\end{DoxyCompactList}\item 
int \hyperlink{a1_8c_ac680dc3b3bec09f0c0c31cbd11a33481}{write\_\-pipe} (int pipe\_\-wr, const void $\ast$buffer, size\_\-t size)
\begin{DoxyCompactList}\small\item\em A write() wrapper function. \item\end{DoxyCompactList}\item 
void \hyperlink{a1_8c_a0f652fc98ffe05ea6bf52ced076a02aa}{fatal} (char $\ast$s)
\begin{DoxyCompactList}\small\item\em A error helper function. Prints message to stderr and terminates program. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hypertarget{a1_8c_a34a27df6e28989f56b36fe67b805cc56}{
Users tomnightingale workspace school T4 comp4981 assignments assignment\_\-1 a1 {\bfseries c}}
\label{a1_8c_a34a27df6e28989f56b36fe67b805cc56}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
This program demonstrates simple Linux IPC using pipes and signals. \begin{DoxyAuthor}{Author}
Tom Nightingale
\end{DoxyAuthor}
3 processes are created: 1. Input (parent) This process manages all keyboard input. It passes characters to the output process for display while also storing them in a buffer. When the special $<$ENTER$>$ key is pushed, the buffer is then sent to the translate process for parsing. 2. Output This process outputs all characters sent to it. 3. Translate This process parses any string sent to it according to the rules laid out in the assignment brief. Once finished, it passes the resulting string onto the output process for display. 

\subsection{Function Documentation}
\hypertarget{a1_8c_a0f652fc98ffe05ea6bf52ced076a02aa}{
\index{a1.c@{a1.c}!fatal@{fatal}}
\index{fatal@{fatal}!a1.c@{a1.c}}
\subsubsection[{fatal}]{\setlength{\rightskip}{0pt plus 5cm}void fatal (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{s}
\end{DoxyParamCaption}
)}}
\label{a1_8c_a0f652fc98ffe05ea6bf52ced076a02aa}


A error helper function. Prints message to stderr and terminates program. 

\begin{DoxyAuthor}{Author}
Tom Nightingale
\end{DoxyAuthor}

\begin{DoxyParams}{Parameters}
{\em s} & An error message to print to stderr. \\
\hline
\end{DoxyParams}
\hypertarget{a1_8c_a2fb49de02216f1bca9a118ed5ddcf1a4}{
\index{a1.c@{a1.c}!input\_\-proc@{input\_\-proc}}
\index{input\_\-proc@{input\_\-proc}!a1.c@{a1.c}}
\subsubsection[{input\_\-proc}]{\setlength{\rightskip}{0pt plus 5cm}void input\_\-proc (
\begin{DoxyParamCaption}
\item[{int}]{pid\mbox{[}2\mbox{]}, }
\item[{int}]{txpipe\_\-output, }
\item[{int}]{txpipe\_\-translate}
\end{DoxyParamCaption}
)}}
\label{a1_8c_a2fb49de02216f1bca9a118ed5ddcf1a4}


The input process. 

\begin{DoxyAuthor}{Author}
Tom Nightingale
\end{DoxyAuthor}
This is the program's main process. It monitors all keyboard input and passes characters on to the output process for echoing back. It also stores the characters within a buffer until the special $<$ENTER$>$ character is received. When this occurs, the buffer is sent to the translate function for processing.


\begin{DoxyParams}{Parameters}
{\em pid} & An array containing all child process id's. \\
\hline
{\em txpipe\_\-output} & A pipe write file descriptor for sending data to the output process. \\
\hline
{\em txpipe\_\-translate} & A pipe write file descriptor for sending data to the translate process. \\
\hline
\end{DoxyParams}
\hypertarget{a1_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}{
\index{a1.c@{a1.c}!main@{main}}
\index{main@{main}!a1.c@{a1.c}}
\subsubsection[{main}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}
\label{a1_8c_ae66f6b31b5ad750f1fe042a706a4e3d4}


The program's entry point. 

\begin{DoxyAuthor}{Author}
Tom Nightingale
\end{DoxyAuthor}
Initializes the processes and ports for IPC. \hypertarget{a1_8c_ac8d1bf8f5c60787353c9ea88595b9011}{
\index{a1.c@{a1.c}!output\_\-proc@{output\_\-proc}}
\index{output\_\-proc@{output\_\-proc}!a1.c@{a1.c}}
\subsubsection[{output\_\-proc}]{\setlength{\rightskip}{0pt plus 5cm}void output\_\-proc (
\begin{DoxyParamCaption}
\item[{int}]{rxpipe\_\-input, }
\item[{int}]{rxpipe\_\-translate}
\end{DoxyParamCaption}
)}}
\label{a1_8c_ac8d1bf8f5c60787353c9ea88595b9011}


The output process. 

\begin{DoxyAuthor}{Author}
Tom Nightingale
\end{DoxyAuthor}
This process handles all output display. It simply reads data off its pipes and echos it to stdout. If it receives an 'E' (special $<$ENTER$>$ character), it will check the translate pipe for any data to echo.


\begin{DoxyParams}{Parameters}
{\em rxpipe\_\-input} & A pipe read file descriptor for receiving data from the output process. \\
\hline
{\em rxpipe\_\-translate} & A pipe read file descriptor for receiving data from the translate process. \\
\hline
\end{DoxyParams}
\hypertarget{a1_8c_ab71fb9a570e0649866fb0a8524567a86}{
\index{a1.c@{a1.c}!read\_\-pipe@{read\_\-pipe}}
\index{read\_\-pipe@{read\_\-pipe}!a1.c@{a1.c}}
\subsubsection[{read\_\-pipe}]{\setlength{\rightskip}{0pt plus 5cm}int read\_\-pipe (
\begin{DoxyParamCaption}
\item[{int}]{pipe\_\-rd, }
\item[{char $\ast$}]{buffer, }
\item[{size\_\-t}]{size}
\end{DoxyParamCaption}
)}}
\label{a1_8c_ab71fb9a570e0649866fb0a8524567a86}


A read() wrapper function. 

\begin{DoxyAuthor}{Author}
Tom Nightingale
\end{DoxyAuthor}
Helper function for read(), provides error checking.


\begin{DoxyParams}{Parameters}
{\em pipe\_\-rd} & A pipe read file descriptor for receiving data. \\
\hline
{\em buffer} & A buffer to write data into. \\
\hline
{\em size} & The max amount of data to read. \\
\hline
\end{DoxyParams}
\hypertarget{a1_8c_a2f39a13b806940232930f1dfbc8d631a}{
\index{a1.c@{a1.c}!translate\_\-proc@{translate\_\-proc}}
\index{translate\_\-proc@{translate\_\-proc}!a1.c@{a1.c}}
\subsubsection[{translate\_\-proc}]{\setlength{\rightskip}{0pt plus 5cm}void translate\_\-proc (
\begin{DoxyParamCaption}
\item[{int}]{rxpipe\_\-input, }
\item[{int}]{txpipe\_\-output}
\end{DoxyParamCaption}
)}}
\label{a1_8c_a2f39a13b806940232930f1dfbc8d631a}


The translate process. 

\begin{DoxyAuthor}{Author}
Tom Nightingale
\end{DoxyAuthor}
This process handles translation of the input buffer. Whenever the input process writes data onto the pipe, this process will read it off and parse it according to the following rules. $\ast$ X: Backspace character. $\ast$ a: Translated into z. $\ast$ T: Terminate character.


\begin{DoxyParams}{Parameters}
{\em rxpipe\_\-input} & A pipe read file descriptor for receiving data from the output process. \\
\hline
{\em txpipe\_\-output} & A pipe write file descriptor for sending data to the output process. \\
\hline
\end{DoxyParams}
\hypertarget{a1_8c_ac680dc3b3bec09f0c0c31cbd11a33481}{
\index{a1.c@{a1.c}!write\_\-pipe@{write\_\-pipe}}
\index{write\_\-pipe@{write\_\-pipe}!a1.c@{a1.c}}
\subsubsection[{write\_\-pipe}]{\setlength{\rightskip}{0pt plus 5cm}int write\_\-pipe (
\begin{DoxyParamCaption}
\item[{int}]{pipe\_\-wr, }
\item[{const void $\ast$}]{buffer, }
\item[{size\_\-t}]{size}
\end{DoxyParamCaption}
)}}
\label{a1_8c_ac680dc3b3bec09f0c0c31cbd11a33481}


A write() wrapper function. 

\begin{DoxyAuthor}{Author}
Tom Nightingale
\end{DoxyAuthor}
Helper function for write(), provides error checking.


\begin{DoxyParams}{Parameters}
{\em pipe\_\-wr} & A pipe write file descriptor for sending data. \\
\hline
{\em buffer} & A buffer containing data to write. \\
\hline
{\em size} & The max amount of data to write. \\
\hline
\end{DoxyParams}
