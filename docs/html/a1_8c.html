<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>COMP 4981 - Assignment 1: a1.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">COMP 4981 - Assignment 1&#160;<span id="projectnumber">1.0</span></div>
   <div id="projectbrief">IPC - Pipes and Signals</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>a1.c File Reference</h1>  </div>
</div>
<div class="contents">

<p>This program demonstrates simple Linux IPC using pipes and signals.  
<a href="#_details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="a1_8h_source.html">a1.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a1_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The program's entry point.  <a href="#ae66f6b31b5ad750f1fe042a706a4e3d4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a1_8c.html#a2fb49de02216f1bca9a118ed5ddcf1a4">input_proc</a> (int pid[2], int txpipe_output, int txpipe_translate)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The input process.  <a href="#a2fb49de02216f1bca9a118ed5ddcf1a4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a1_8c.html#ac8d1bf8f5c60787353c9ea88595b9011">output_proc</a> (int rxpipe_input, int rxpipe_translate)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The output process.  <a href="#ac8d1bf8f5c60787353c9ea88595b9011"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a1_8c.html#a2f39a13b806940232930f1dfbc8d631a">translate_proc</a> (int rxpipe_input, int txpipe_output)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The translate process.  <a href="#a2f39a13b806940232930f1dfbc8d631a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a1_8c.html#ab71fb9a570e0649866fb0a8524567a86">read_pipe</a> (int pipe_rd, char *buffer, size_t size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">A read() wrapper function.  <a href="#ab71fb9a570e0649866fb0a8524567a86"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a1_8c.html#ac680dc3b3bec09f0c0c31cbd11a33481">write_pipe</a> (int pipe_wr, const void *buffer, size_t size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">A write() wrapper function.  <a href="#ac680dc3b3bec09f0c0c31cbd11a33481"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a1_8c.html#a0f652fc98ffe05ea6bf52ced076a02aa">fatal</a> (char *s)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">A error helper function. Prints message to stderr and terminates program.  <a href="#a0f652fc98ffe05ea6bf52ced076a02aa"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a34a27df6e28989f56b36fe67b805cc56"></a><!-- doxytag: member="a1.c::c" ref="a34a27df6e28989f56b36fe67b805cc56" args="" -->
Users tomnightingale workspace <br class="typebreak"/>
school T4 comp4981 assignments <br class="typebreak"/>
assignment_1 a1&#160;</td><td class="memItemRight" valign="bottom"><b>c</b></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>This program demonstrates simple Linux IPC using pipes and signals. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Tom Nightingale</dd></dl>
<p>3 processes are created: 1. Input (parent) This process manages all keyboard input. It passes characters to the output process for display while also storing them in a buffer. When the special &lt;ENTER&gt; key is pushed, the buffer is then sent to the translate process for parsing. 2. Output This process outputs all characters sent to it. 3. Translate This process parses any string sent to it according to the rules laid out in the assignment brief. Once finished, it passes the resulting string onto the output process for display. </p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="a0f652fc98ffe05ea6bf52ced076a02aa"></a><!-- doxytag: member="a1.c::fatal" ref="a0f652fc98ffe05ea6bf52ced076a02aa" args="(char *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fatal </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A error helper function. Prints message to stderr and terminates program. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Tom Nightingale</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>An error message to print to stderr. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2fb49de02216f1bca9a118ed5ddcf1a4"></a><!-- doxytag: member="a1.c::input_proc" ref="a2fb49de02216f1bca9a118ed5ddcf1a4" args="(int pid[2], int txpipe_output, int txpipe_translate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void input_proc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pid</em>[2], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>txpipe_output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>txpipe_translate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The input process. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Tom Nightingale</dd></dl>
<p>This is the program's main process. It monitors all keyboard input and passes characters on to the output process for echoing back. It also stores the characters within a buffer until the special &lt;ENTER&gt; character is received. When this occurs, the buffer is sent to the translate function for processing.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pid</td><td>An array containing all child process id's. </td></tr>
    <tr><td class="paramname">txpipe_output</td><td>A pipe write file descriptor for sending data to the output process. </td></tr>
    <tr><td class="paramname">txpipe_translate</td><td>A pipe write file descriptor for sending data to the translate process. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae66f6b31b5ad750f1fe042a706a4e3d4"></a><!-- doxytag: member="a1.c::main" ref="ae66f6b31b5ad750f1fe042a706a4e3d4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The program's entry point. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Tom Nightingale</dd></dl>
<p>Initializes the processes and ports for IPC. </p>

</div>
</div>
<a class="anchor" id="ac8d1bf8f5c60787353c9ea88595b9011"></a><!-- doxytag: member="a1.c::output_proc" ref="ac8d1bf8f5c60787353c9ea88595b9011" args="(int rxpipe_input, int rxpipe_translate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void output_proc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rxpipe_input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rxpipe_translate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The output process. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Tom Nightingale</dd></dl>
<p>This process handles all output display. It simply reads data off its pipes and echos it to stdout. If it receives an 'E' (special &lt;ENTER&gt; character), it will check the translate pipe for any data to echo.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">rxpipe_input</td><td>A pipe read file descriptor for receiving data from the output process. </td></tr>
    <tr><td class="paramname">rxpipe_translate</td><td>A pipe read file descriptor for receiving data from the translate process. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab71fb9a570e0649866fb0a8524567a86"></a><!-- doxytag: member="a1.c::read_pipe" ref="ab71fb9a570e0649866fb0a8524567a86" args="(int pipe_rd, char *buffer, size_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int read_pipe </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pipe_rd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A read() wrapper function. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Tom Nightingale</dd></dl>
<p>Helper function for read(), provides error checking.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pipe_rd</td><td>A pipe read file descriptor for receiving data. </td></tr>
    <tr><td class="paramname">buffer</td><td>A buffer to write data into. </td></tr>
    <tr><td class="paramname">size</td><td>The max amount of data to read. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2f39a13b806940232930f1dfbc8d631a"></a><!-- doxytag: member="a1.c::translate_proc" ref="a2f39a13b806940232930f1dfbc8d631a" args="(int rxpipe_input, int txpipe_output)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void translate_proc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rxpipe_input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>txpipe_output</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The translate process. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Tom Nightingale</dd></dl>
<p>This process handles translation of the input buffer. Whenever the input process writes data onto the pipe, this process will read it off and parse it according to the following rules. * X: Backspace character. * a: Translated into z. * T: Terminate character.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">rxpipe_input</td><td>A pipe read file descriptor for receiving data from the output process. </td></tr>
    <tr><td class="paramname">txpipe_output</td><td>A pipe write file descriptor for sending data to the output process. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac680dc3b3bec09f0c0c31cbd11a33481"></a><!-- doxytag: member="a1.c::write_pipe" ref="ac680dc3b3bec09f0c0c31cbd11a33481" args="(int pipe_wr, const void *buffer, size_t size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int write_pipe </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pipe_wr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A write() wrapper function. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Tom Nightingale</dd></dl>
<p>Helper function for write(), provides error checking.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pipe_wr</td><td>A pipe write file descriptor for sending data. </td></tr>
    <tr><td class="paramname">buffer</td><td>A buffer containing data to write. </td></tr>
    <tr><td class="paramname">size</td><td>The max amount of data to write. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Thu Jan 27 2011 03:36:56 for COMP 4981 - Assignment 1 by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
